

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>src.cache_config &mdash; CacheManager 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            CacheManager
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CacheManager</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">src.cache_config</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for src.cache_config</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dotenv</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_dotenv</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">field_validator</span>

<span class="n">load_dotenv</span><span class="p">()</span>

<div class="viewcode-block" id="EvictionPolicy">
<a class="viewcode-back" href="../../api/eviction_policies.html#src.cache_config.EvictionPolicy">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">EvictionPolicy</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enum defining cache eviction policies.</span>
<span class="sd">    </span>
<span class="sd">    Available policies:</span>
<span class="sd">    - LRU: Least Recently Used - evicts least recently accessed items first</span>
<span class="sd">    - FIFO: First In First Out - evicts oldest items first</span>
<span class="sd">    - LFU: Least Frequently Used - evicts least frequently accessed items</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LRU</span> <span class="o">=</span> <span class="s2">&quot;lru&quot;</span>
    <span class="n">FIFO</span> <span class="o">=</span> <span class="s2">&quot;fifo&quot;</span>
    <span class="n">LFU</span> <span class="o">=</span> <span class="s2">&quot;lfu&quot;</span></div>


<div class="viewcode-block" id="CacheLayerType">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheLayerType">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CacheLayerType</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enum defining cache layer types.</span>
<span class="sd">    </span>
<span class="sd">    Available types:</span>
<span class="sd">    - MEMORY: In-memory cache (fastest, but volatile)</span>
<span class="sd">    - REDIS: Redis cache (networked, shared across instances)</span>
<span class="sd">    - DISK: Local disk storage via shelve (persistent, but slow)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">MEMORY</span> <span class="o">=</span> <span class="s2">&quot;memory&quot;</span>
    <span class="n">REDIS</span> <span class="o">=</span> <span class="s2">&quot;redis&quot;</span>
    <span class="n">DISK</span> <span class="o">=</span> <span class="s2">&quot;disk&quot;</span></div>


<div class="viewcode-block" id="LogLevel">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.LogLevel">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">LogLevel</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enum defining log levels.</span>
<span class="sd">    </span>
<span class="sd">    Available levels:</span>
<span class="sd">    - DEBUG: Detailed debugging information</span>
<span class="sd">    - INFO: Confirmation that things are working as expected</span>
<span class="sd">    - WARNING: Indication that something unexpected happened</span>
<span class="sd">    - ERROR: Due to a more serious problem, the software hasn&#39;t been able to perform a function</span>
<span class="sd">    - CRITICAL: A serious error indicating the program may be unable to continue running</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">DEBUG</span> <span class="o">=</span> <span class="s2">&quot;debug&quot;</span>
    <span class="n">INFO</span> <span class="o">=</span> <span class="s2">&quot;info&quot;</span>
    <span class="n">WARNING</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span>
    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
    <span class="n">CRITICAL</span> <span class="o">=</span> <span class="s2">&quot;critical&quot;</span></div>


<div class="viewcode-block" id="Environment">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.Environment">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Environment</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enum defining environment types.</span>
<span class="sd">    </span>
<span class="sd">    Available environments:</span>
<span class="sd">    - DEV: Development environment</span>
<span class="sd">    - TEST: Testing environment</span>
<span class="sd">    - PROD: Production environment</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">DEV</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
    <span class="n">TEST</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
    <span class="n">PROD</span> <span class="o">=</span> <span class="s2">&quot;prod&quot;</span></div>


<div class="viewcode-block" id="CacheLayerConfig">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheLayerConfig">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CacheLayerConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for a single cache layer.</span>
<span class="sd">    </span>
<span class="sd">    Defines the type, TTL, and other settings for a specific cache layer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">CacheLayerType</span>
    <span class="n">ttl</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">weight</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;For future use with weighted distribution&quot;</span><span class="p">)</span>
    <span class="n">max_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Size limit for this layer (None = use parent setting)&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="CacheConfig">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CacheConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for the CacheManager.</span>
<span class="sd">    </span>
<span class="sd">    Provides settings for cache storage, Redis connection, and retry behavior.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Cache settings</span>
    <span class="n">cache_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CACHE_DIR&quot;</span><span class="p">,</span> <span class="s2">&quot;.cache&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Directory where cache files are stored&quot;</span>
    <span class="p">)</span>
    <span class="n">cache_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CACHE_FILE&quot;</span><span class="p">,</span> <span class="s2">&quot;cache.db&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Filename for disk cache storage&quot;</span>
    <span class="p">)</span>
    <span class="n">cache_max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CACHE_MAX_SIZE&quot;</span><span class="p">,</span> <span class="s2">&quot;5000&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Maximum number of items to store in the cache&quot;</span>
    <span class="p">)</span>
    <span class="n">cache_ttl</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CACHE_TTL&quot;</span><span class="p">,</span> <span class="s2">&quot;300.0&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Default time-to-live for cache entries in seconds&quot;</span>
    <span class="p">)</span>
    <span class="n">eviction_policy</span><span class="p">:</span> <span class="n">EvictionPolicy</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">EvictionPolicy</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVICTION_POLICY&quot;</span><span class="p">,</span> <span class="s2">&quot;lru&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Policy for evicting items when cache is full&quot;</span>
    <span class="p">)</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CACHE_NAMESPACE&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Namespace for cache keys to avoid collisions&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Redis settings</span>
    <span class="n">use_redis</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;USE_REDIS&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to use Redis as a cache backend&quot;</span>
    <span class="p">)</span>
    <span class="n">redis_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;REDIS_URL&quot;</span><span class="p">,</span> <span class="s2">&quot;redis://localhost&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Base URL for Redis connection&quot;</span>
    <span class="p">)</span>
    <span class="n">redis_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;REDIS_PORT&quot;</span><span class="p">,</span> <span class="s2">&quot;6379&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Port for Redis connection&quot;</span>
    <span class="p">)</span>
    <span class="n">redis_username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;REDIS_USERNAME&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Username for Redis authentication&quot;</span>
    <span class="p">)</span>
    <span class="n">redis_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;REDIS_PASSWORD&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Password for Redis authentication&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Memory cache settings</span>
    <span class="n">memory_cache_ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MEMORY_CACHE_TTL&quot;</span><span class="p">,</span> <span class="s2">&quot;60&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;TTL for in-memory cache entries in seconds&quot;</span>
    <span class="p">)</span>
    <span class="n">memory_cache_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MEMORY_CACHE_ENABLED&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to use in-memory caching&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Hybrid caching settings</span>
    <span class="n">use_layered_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;USE_LAYERED_CACHE&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to use multiple cache layers with different speeds/persistence&quot;</span>
    <span class="p">)</span>
    <span class="n">cache_layers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CacheLayerConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Configuration for each cache layer when using layered caching&quot;</span>
    <span class="p">)</span>
    <span class="n">write_through</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CACHE_WRITE_THROUGH&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to write to all cache layers on set operations&quot;</span>
    <span class="p">)</span>
    <span class="n">read_through</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CACHE_READ_THROUGH&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to read from slower layers when item not found in faster layers&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Cache compression</span>
    <span class="n">enable_compression</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENABLE_COMPRESSION&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to compress cache entries to save space&quot;</span>
    <span class="p">)</span>
    <span class="n">compression_min_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;COMPRESSION_MIN_SIZE&quot;</span><span class="p">,</span> <span class="s2">&quot;1024&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Minimum size in bytes for compression to be applied&quot;</span>
    <span class="p">)</span>
    <span class="n">compression_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;COMPRESSION_LEVEL&quot;</span><span class="p">,</span> <span class="s2">&quot;6&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Compression level (1-9) for zlib compression&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Disk usage monitoring and cleanup settings</span>
    <span class="n">disk_usage_monitoring</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISK_USAGE_MONITORING&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to monitor disk usage and perform cleanup&quot;</span>
    <span class="p">)</span>
    <span class="n">disk_usage_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISK_USAGE_THRESHOLD&quot;</span><span class="p">,</span> <span class="s2">&quot;75.0&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Percentage threshold (0-100) to trigger cleanup&quot;</span>
    <span class="p">)</span>
    <span class="n">disk_critical_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISK_CRITICAL_THRESHOLD&quot;</span><span class="p">,</span> <span class="s2">&quot;90.0&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Critical percentage threshold for aggressive cleanup&quot;</span>
    <span class="p">)</span>
    <span class="n">disk_check_interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISK_CHECK_INTERVAL&quot;</span><span class="p">,</span> <span class="s2">&quot;3600&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;How often to check disk usage (in seconds)&quot;</span>
    <span class="p">)</span>
    <span class="n">disk_retention_days</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISK_RETENTION_DAYS&quot;</span><span class="p">,</span> <span class="s2">&quot;30&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Default days to keep cached items during cleanup&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Retry settings</span>
    <span class="n">retry_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;RETRY_ATTEMPTS&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of retry attempts for failed operations&quot;</span>
    <span class="p">)</span>
    <span class="n">retry_delay</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;RETRY_DELAY&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Delay between retry attempts in seconds&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Environment and logging settings</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Environment</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Environment</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENV&quot;</span><span class="p">,</span> <span class="s2">&quot;dev&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Current environment (dev, test, prod)&quot;</span>
    <span class="p">)</span>
    <span class="n">log_level</span><span class="p">:</span> <span class="n">LogLevel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;dev&quot;</span><span class="p">:</span> <span class="n">LogLevel</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
            <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="n">LogLevel</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
            <span class="s2">&quot;prod&quot;</span><span class="p">:</span> <span class="n">LogLevel</span><span class="o">.</span><span class="n">WARNING</span>
        <span class="p">}[</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENV&quot;</span><span class="p">,</span> <span class="s2">&quot;dev&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()],</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Logging level based on environment&quot;</span>
    <span class="p">)</span>
    <span class="n">log_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;LOG_DIR&quot;</span><span class="p">,</span> <span class="s2">&quot;./logs&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Directory where log files are stored&quot;</span>
    <span class="p">)</span>
    <span class="n">log_to_file</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;LOG_TO_FILE&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">)</span>
        <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENV&quot;</span><span class="p">,</span> <span class="s2">&quot;dev&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;prod&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to write logs to file in addition to console&quot;</span>
    <span class="p">)</span>
    <span class="n">log_max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;LOG_MAX_SIZE&quot;</span><span class="p">,</span> <span class="s2">&quot;10485760&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Maximum size of log files in bytes (10MB default)&quot;</span>
    <span class="p">)</span>
    <span class="n">log_backup_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;LOG_BACKUP_COUNT&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of log file backups to keep&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Telemetry and performance monitoring</span>
    <span class="n">enable_telemetry</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENABLE_TELEMETRY&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to collect telemetry data for performance monitoring&quot;</span>
    <span class="p">)</span>
    <span class="n">telemetry_interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TELEMETRY_INTERVAL&quot;</span><span class="p">,</span> <span class="s2">&quot;60&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Interval in seconds for collecting telemetry data&quot;</span>
    <span class="p">)</span>
    <span class="n">metrics_collection</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;METRICS_COLLECTION&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to collect cache performance metrics&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Cache warmup settings</span>
    <span class="n">enable_warmup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENABLE_WARMUP&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to pre-warm the cache with frequently used keys&quot;</span>
    <span class="p">)</span>
    <span class="n">warmup_keys_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;WARMUP_KEYS_FILE&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Path to file containing keys for cache warmup&quot;</span>
    <span class="p">)</span>
    <span class="n">warmup_on_start</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;WARMUP_ON_START&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to perform cache warmup on startup&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Adaptive TTL settings</span>
    <span class="n">enable_adaptive_ttl</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENABLE_ADAPTIVE_TTL&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to adjust TTL based on access patterns&quot;</span>
    <span class="p">)</span>
    <span class="n">adaptive_ttl_min</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ADAPTIVE_TTL_MIN&quot;</span><span class="p">,</span> <span class="s2">&quot;60&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Minimum TTL in seconds for adaptive TTL&quot;</span>
    <span class="p">)</span>
    <span class="n">adaptive_ttl_max</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ADAPTIVE_TTL_MAX&quot;</span><span class="p">,</span> <span class="s2">&quot;86400&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Maximum TTL in seconds (1 day) for adaptive TTL&quot;</span>
    <span class="p">)</span>
    <span class="n">access_count_threshold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ACCESS_COUNT_THRESHOLD&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of accesses to trigger TTL adjustment&quot;</span>
    <span class="p">)</span>
    <span class="n">adaptive_ttl_adjustment_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ADAPTIVE_TTL_ADJUSTMENT_FACTOR&quot;</span><span class="p">,</span> <span class="s2">&quot;1.5&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Factor by which to adjust TTL when threshold is reached&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Distributed locking settings</span>
    <span class="n">use_distributed_locking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;USE_DISTRIBUTED_LOCKING&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to use distributed locking for concurrent operations&quot;</span>
    <span class="p">)</span>
    <span class="n">lock_timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;LOCK_TIMEOUT&quot;</span><span class="p">,</span> <span class="s2">&quot;30&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Lock expiration time in seconds&quot;</span>
    <span class="p">)</span>
    <span class="n">lock_retry_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;LOCK_RETRY_ATTEMPTS&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Maximum number of retry attempts for acquiring a lock&quot;</span>
    <span class="p">)</span>
    <span class="n">lock_retry_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;LOCK_RETRY_INTERVAL&quot;</span><span class="p">,</span> <span class="s2">&quot;0.2&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Time between lock retry attempts in seconds&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Cache sharding settings</span>
    <span class="n">enable_sharding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENABLE_SHARDING&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to shard the cache across multiple partitions&quot;</span>
    <span class="p">)</span>
    <span class="n">num_shards</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;NUM_SHARDS&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of cache shards to use&quot;</span>
    <span class="p">)</span>
    <span class="n">sharding_algorithm</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;SHARDING_ALGORITHM&quot;</span><span class="p">,</span> <span class="s2">&quot;consistent_hash&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Algorithm for sharding (&#39;consistent_hash&#39; or &#39;modulo&#39;)&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Cross-node cache invalidation</span>
    <span class="n">enable_invalidation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENABLE_INVALIDATION&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to enable cross-node cache invalidation&quot;</span>
    <span class="p">)</span>
    <span class="n">invalidation_channel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;INVALIDATION_CHANNEL&quot;</span><span class="p">,</span> <span class="s2">&quot;cache:invalidation&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Redis channel for invalidation messages&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Security settings</span>
    <span class="n">enable_encryption</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENABLE_ENCRYPTION&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to encrypt cache data&quot;</span>
    <span class="p">)</span>
    <span class="n">encryption_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENCRYPTION_KEY&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Secret key for encryption&quot;</span>
    <span class="p">)</span>
    <span class="n">encryption_salt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENCRYPTION_SALT&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Salt for encryption key derivation&quot;</span>
    <span class="p">)</span>
    
    <span class="n">enable_data_signing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENABLE_DATA_SIGNING&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to cryptographically sign cache data&quot;</span>
    <span class="p">)</span>
    <span class="n">signing_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;SIGNING_KEY&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Secret key for signing&quot;</span>
    <span class="p">)</span>
    <span class="n">signing_algorithm</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;SIGNING_ALGORITHM&quot;</span><span class="p">,</span> <span class="s2">&quot;sha256&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Hash algorithm for signing&quot;</span>
    <span class="p">)</span>
    
    <span class="n">enable_access_control</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ENABLE_ACCESS_CONTROL&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to enable access control for cache operations&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Redis connection security settings</span>
    <span class="n">redis_ssl</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;REDIS_SSL&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to use SSL for Redis connections&quot;</span>
    <span class="p">)</span>
    <span class="n">redis_ssl_cert_reqs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;REDIS_SSL_CERT_REQS&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;SSL certificate requirements (&#39;none&#39;, &#39;optional&#39;, or &#39;required&#39;)&quot;</span>
    <span class="p">)</span>
    <span class="n">redis_ssl_ca_certs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;REDIS_SSL_CA_CERTS&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Path to CA certificates file for SSL verification&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Secure connection pool settings</span>
    <span class="n">redis_connection_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;REDIS_CONNECTION_TIMEOUT&quot;</span><span class="p">,</span> <span class="s2">&quot;5.0&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Timeout for Redis connections in seconds&quot;</span>
    <span class="p">)</span>
    <span class="n">redis_max_connections</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;REDIS_MAX_CONNECTIONS&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Maximum number of Redis connections in the pool&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Redis Sentinel/Cluster support</span>
    <span class="n">use_redis_sentinel</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;USE_REDIS_SENTINEL&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to use Redis Sentinel for high availability&quot;</span>
    <span class="p">)</span>
    <span class="n">sentinel_master_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;SENTINEL_MASTER_NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;mymaster&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Name of the master in Redis Sentinel configuration&quot;</span>
    <span class="p">)</span>
    <span class="n">sentinel_addresses</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;SENTINEL_ADDRESSES&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;SENTINEL_ADDRESSES&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="p">[],</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of Redis Sentinel addresses&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Disk cache settings</span>
    <span class="n">disk_cache_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISK_CACHE_ENABLED&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to enable disk-based caching&quot;</span>
    <span class="p">)</span>
    <span class="n">disk_cache_ttl</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISK_CACHE_TTL&quot;</span><span class="p">,</span> <span class="s2">&quot;3600.0&quot;</span><span class="p">)),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Time-to-live for disk cache entries in seconds (1 hour default)&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="CacheConfig.validate_positive_int">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.validate_positive_int">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;cache_max_size&quot;</span><span class="p">,</span> <span class="s2">&quot;retry_attempts&quot;</span><span class="p">,</span> <span class="s2">&quot;retry_delay&quot;</span><span class="p">,</span> <span class="s2">&quot;redis_port&quot;</span><span class="p">,</span> <span class="s2">&quot;memory_cache_ttl&quot;</span><span class="p">,</span> <span class="s2">&quot;compression_min_size&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_positive_int</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that integer fields are positive.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value must be positive, got </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span></div>


<div class="viewcode-block" id="CacheConfig.validate_percentage">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.validate_percentage">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;disk_usage_threshold&quot;</span><span class="p">,</span> <span class="s2">&quot;disk_critical_threshold&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_percentage</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that threshold values are valid percentages.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="mf">100.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Percentage value must be between 0 and 100, got </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span></div>

    
<div class="viewcode-block" id="CacheConfig.validate_compression_level">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.validate_compression_level">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;compression_level&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_compression_level</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate compression level is between 1 and 9.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Compression level must be between 1 and 9, got </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span></div>

    
<div class="viewcode-block" id="CacheConfig.validate_namespace">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.validate_namespace">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;namespace&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_namespace</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the namespace string.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Namespace cannot be empty&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Namespace cannot contain &#39;:&#39; character&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span></div>

    
<div class="viewcode-block" id="CacheConfig.initialize_default_layers">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.initialize_default_layers">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;cache_layers&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">initialize_default_layers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CacheLayerConfig</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">CacheLayerConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize default cache layers if none provided.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">CacheLayerConfig</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">CacheLayerType</span><span class="o">.</span><span class="n">MEMORY</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>
                <span class="n">CacheLayerConfig</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">CacheLayerType</span><span class="o">.</span><span class="n">REDIS</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
                <span class="n">CacheLayerConfig</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">CacheLayerType</span><span class="o">.</span><span class="n">DISK</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">return</span> <span class="n">v</span></div>

    
<div class="viewcode-block" id="CacheConfig.validate_adaptive_ttl_range">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.validate_adaptive_ttl_range">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;adaptive_ttl_min&quot;</span><span class="p">,</span> <span class="s2">&quot;adaptive_ttl_max&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_adaptive_ttl_range</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that adaptive TTL values are reasonable.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">field_name</span> <span class="o">==</span> <span class="s2">&quot;adaptive_ttl_min&quot;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Minimum adaptive TTL must be at least 1 second, got </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">field_name</span> <span class="o">==</span> <span class="s2">&quot;adaptive_ttl_max&quot;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;adaptive_ttl_min&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maximum adaptive TTL must be greater than minimum (</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;adaptive_ttl_min&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">)</span><span class="si">}</span><span class="s2">), got </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span></div>

    
<div class="viewcode-block" id="CacheConfig.validate_positive_ints">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.validate_positive_ints">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;lock_timeout&quot;</span><span class="p">,</span> <span class="s2">&quot;lock_retry_attempts&quot;</span><span class="p">,</span> <span class="s2">&quot;num_shards&quot;</span><span class="p">,</span> <span class="s2">&quot;redis_max_connections&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_positive_ints</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that int fields are positive.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Value must be positive&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span></div>

    
<div class="viewcode-block" id="CacheConfig.validate_positive_float">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.validate_positive_float">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;lock_retry_interval&quot;</span><span class="p">,</span> <span class="s2">&quot;redis_connection_timeout&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_positive_float</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that float fields are positive.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Value must be positive&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span></div>

    
<div class="viewcode-block" id="CacheConfig.validate_signing_algorithm">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.validate_signing_algorithm">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;signing_algorithm&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_signing_algorithm</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the signing algorithm.&quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">hashlib</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">algorithms_guaranteed</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported hash algorithm: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span></div>

    
<div class="viewcode-block" id="CacheConfig.validate_sharding_algorithm">
<a class="viewcode-back" href="../../api/cache_config.html#src.cache_config.CacheConfig.validate_sharding_algorithm">[docs]</a>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;sharding_algorithm&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_sharding_algorithm</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the sharding algorithm.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;consistent_hash&quot;</span><span class="p">,</span> <span class="s2">&quot;modulo&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported sharding algorithm: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span></div>

    
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">full_redis_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs the full Redis URL based on the individual settings.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            str: The complete Redis URL including credentials if provided</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scheme</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">redis_url</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;://&quot;</span><span class="p">)</span>
        <span class="n">host</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># remove port if any exists</span>
        
        <span class="n">credentials</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">redis_username</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">redis_password</span><span class="p">:</span>
            <span class="n">credentials</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">redis_username</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">redis_password</span><span class="si">}</span><span class="s2">@&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">redis_password</span><span class="p">:</span>
            <span class="n">credentials</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">redis_password</span><span class="si">}</span><span class="s2">@&quot;</span>
            
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">scheme</span><span class="si">}</span><span class="s2">://</span><span class="si">{</span><span class="n">credentials</span><span class="si">}{</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">redis_port</span><span class="si">}</span><span class="s2">&quot;</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, CacheManager Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>